## 问题分析

通过检查所有Activity文件，我发现了以下关键问题：

1. **页面识别不完整**：
   - 实际存在6个Activity：Main、Second、Second2、Third、Third2、Third3
   - 但生成的地图只包含3个页面（Main、Second、Third）
   - 原因：ViewBindingAnalyzer.kt的findActivityFiles方法只查找标准命名的Activity，未处理带数字后缀的Activity

2. **返回操作识别问题**：
   - 所有返回按钮使用`finish()`方法，而非Intent跳转
   - 地图识别器只识别Intent跳转，导致返回操作未被正确映射

3. **动态属性提取缺失**：
   - 部分组件属性在Activity代码中动态设置
   - 地图识别器只从XML布局提取属性，导致动态属性缺失

## 修复方案

### 1. 修复ViewBindingAnalyzer.kt

#### findActivityFiles方法
- **问题**：当前正则只匹配`Activity.kt`结尾，无法识别`SecondActivity2.kt`等带数字后缀的Activity
- **修复**：修改匹配逻辑，支持带数字后缀的Activity命名

#### extractComponentsFromLayout方法
- **问题**：只从XML提取属性，忽略动态设置的属性
- **修复**：增强属性提取，分析Activity初始化代码中的属性设置

#### enrichComponentsWithEvents方法
- **问题**：只识别Intent跳转，忽略`finish()`方法
- **修复**：添加对`finish()`方法的识别，将其映射为返回操作

### 2. 优化MapGenerator.kt

#### buildIntentModelFromScreenInfos方法
- **问题**：未处理从Third2/Third3返回的情况
- **修复**：增强返回按钮处理，支持所有第三层级Activity返回第二层级

#### generatePostConditions方法
- **问题**：确保所有状态转移都有正确的验证条件
- **修复**：优化条件生成，确保所有页面状态都能被正确验证

## 具体修复步骤

### 1. 修改ViewBindingAnalyzer.kt
- **findActivityFiles**：修改正则匹配为`.*Activity\d*\.kt`，支持带数字后缀的Activity
- **enrichComponentsWithEvents**：添加对`finish()`方法的识别
- **extractTargetFromClick**：添加对`finish()`的处理，映射为对应的返回状态

### 2. 修改MapGenerator.kt
- **buildIntentModelFromScreenInfos**：增强返回按钮处理逻辑，支持所有第三层级Activity
- **确保所有6个Activity都被正确映射到状态模型中**

## 预期结果

- 生成的JSON包含所有6个页面（Main、Second、Second2、Third、Third2、Third3）
- 所有返回按钮正确映射到对应的上级状态
- 动态设置的组件属性被正确提取
- 所有组件的交互事件被正确捕获
- 完整的三级导航结构被正确映射