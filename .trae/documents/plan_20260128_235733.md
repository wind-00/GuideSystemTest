# 修复地图生成程序的虚拟组件问题

## 问题分析

通过分析地图生成程序的代码，我发现了问题的根本原因：

1. **虚拟组件生成逻辑**：
   - 在 `map/extractor/map_validator.py` 中，地图生成程序会为每个页面检查是否有返回路径
   - 如果没有返回路径，它会添加一个虚拟的 `auto_back_btn` 组件
   - 这个虚拟组件的 `componentId` 硬编码为 'auto_back_btn'

2. **问题后果**：
   - 地图生成程序没有检查页面中是否已经存在返回按钮组件
   - 它直接添加了虚拟的 `auto_back_btn` 组件，而不是使用页面中实际存在的返回按钮
   - 导致 `fsm_transition.json` 中的映射与实际页面组件不匹配
   - 执行器尝试查找不存在的 `auto_back_btn` 组件，导致执行失败

## 解决方案

修改 `map/extractor/map_validator.py` 文件，改进返回按钮的处理逻辑：

1. **检查现有返回按钮**：
   - 在添加虚拟 `auto_back_btn` 之前，先检查页面中是否已经存在返回按钮组件
   - 识别常见的返回按钮命名模式（如 `btnBack`、`backButton`、`buttonBack` 等）

2. **使用实际返回按钮**：
   - 如果找到现有的返回按钮组件，使用它作为页面的返回操作
   - 确保 `transition` 配置使用正确的组件ID

3. **仅在必要时添加虚拟组件**：
   - 只有当页面中确实没有返回按钮组件时，才添加虚拟的 `auto_back_btn` 组件

## 具体修改步骤

1. **修改 map_validator.py**：
   - 在 `validate_and_enhance_map` 函数中，改进返回路径检查逻辑
   - 添加返回按钮识别函数，检查页面中是否存在返回按钮
   - 优先使用实际返回按钮，仅在必要时添加虚拟组件

2. **重新生成地图**：
   - 运行修改后的地图生成程序，生成新的 `fsm_transition.json` 文件
   - 验证新生成的文件中，返回按钮映射与实际页面组件匹配

3. **测试验证**：
   - 运行应用，测试从不同页面的返回操作
   - 验证所有返回操作都能正确执行，不会出现 `COMPONENT_NOT_FOUND` 错误

## 预期效果

修改后，地图生成程序将：
- 自动识别页面中实际存在的返回按钮组件
- 为每个页面配置正确的返回操作映射
- 仅在必要时添加虚拟返回按钮组件
- 生成与实际页面组件完全匹配的 `fsm_transition.json` 文件

这样，执行器就能找到正确的返回按钮组件，避免 `COMPONENT_NOT_FOUND` 错误，确保返回操作能够正常执行。