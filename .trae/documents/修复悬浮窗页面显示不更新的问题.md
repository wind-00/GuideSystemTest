# 修复悬浮窗页面显示不更新的问题

## 问题分析
从日志中可以看到，ActivityPageStateProvider正确跟踪了当前Activity的变化（从MainActivity到SecondActivity2再到ThirdActivity），但OverlayManager和OverlayView的日志只显示了初始的MainActivity更新，没有在页面导航时更新。

**根本原因**：当用户手动导航页面时（例如点击按钮进入下一个页面），没有触发overlayManager.updatePageId()调用。

## 解决方案

### 1. 在ActivityPageStateProvider中添加回调机制
- 修改ActivityPageStateProvider.kt，添加一个回调接口，当当前Activity变化时通知监听器
- 在onActivityResumed()方法中，当当前Activity变化时调用回调方法

### 2. 在OverlayManager中实现回调接口
- 修改OverlayManager.kt，实现ActivityPageStateProvider的回调接口
- 在回调方法中调用updatePageId()方法更新页面显示

### 3. 确保回调注册
- 在MainActivity.kt中，初始化ActivityPageStateProvider后，将OverlayManager注册为回调监听器

## 具体实现步骤

1. **修改ActivityPageStateProvider.kt**：
   - 添加ActivityChangeListener接口
   - 添加注册和取消注册回调的方法
   - 在onActivityResumed()中调用回调方法

2. **修改OverlayManager.kt**：
   - 实现ActivityChangeListener接口
   - 在onActivityChanged()方法中调用updatePageId()

3. **修改MainActivity.kt**：
   - 在初始化后注册OverlayManager为回调监听器

## 预期效果
- 当用户手动导航页面时，悬浮窗中的"当前页面"显示会自动更新
- 当执行任务时，页面导航也会触发悬浮窗更新
- 日志中会显示完整的页面更新流程