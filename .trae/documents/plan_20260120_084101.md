# UI地图构建器结构增强型修正计划

## 修正目标
提升UI地图对路径规划器与AI的可理解性与可执行性，不增加功能数量，只增强结构。

## 修正内容

### 1. Effect结构修正
- 为每个effect添加`trigger`字段，必须来自component.supportedTriggers
- 为每个effect添加结构化的`result`字段
  - NAVIGATION: {"type": "PAGE_TRANSITION", "targetPageId": "XXX"}
  - NAVIGATION_BACK: {"type": "PAGE_BACK"}
  - STATE_CHANGE: {"type": "INTERNAL_STATE_MUTATION"}
  - NO_OP: {"type": "UI_INTERACTION_ONLY"}

### 2. Component与Effect绑定
- 确保每个effect明确其trigger
- 支持一个component有多个effect
- effect不得脱离component单独存在

### 3. 页面级别语义补充
- 新增`entryPoint`字段：如果页面是MainActivity且没有其他页面指向它，则为true
- 新增`exitless`字段：如果页面内不存在NAVIGATION或NAVIGATION_BACK，则为true

## 修正步骤

1. **读取现有UI地图**：解析`ui_map.json`文件
2. **分析页面关系**：确定每个页面的entryPoint和exitless属性
3. **修正Effect结构**：为每个effect添加trigger和result字段
4. **验证修正结果**：确保满足路径规划器的需求
5. **生成修正后的JSON**：输出修正后的`ui_map.json`文件

## 最终性质保证

- 路径规划器可以仅通过遍历pages → components → effects推导出任意页面到任意可达页面的操作序列
- 即使effectType为NO_OP，也可以作为“有效路径步骤”
- 地图字段的变化不影响执行器实现
- JSON结构简洁、稳定、可演化

## 预期输出
修正后的`ui_map.json`文件，包含增强的effect结构和页面语义信息，满足路径规划器的需求。