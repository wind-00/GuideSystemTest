## 问题分析

根据日志和代码分析，"查看待办任务"规划失败的原因是：

1. **错误信息**：`Failed(reason=NO_TARGET_ACTION)`
2. **根本原因**：Planner在`plan`方法中从`uiMap.visible_text_index`中查找目标visibleText时，使用了严格的精确匹配
3. **可能的触发因素**：
   - AI分析器返回的文本与地图中的键不完全匹配（如"查看待办任务" vs "查看待办"）
   - 用户输入的意图与地图中的键存在细微差异
   - 地图中的键命名与实际使用不一致

## 解决方案

修改`Planner.kt`文件中的`plan`方法，添加模糊匹配逻辑：

1. **添加模糊匹配函数**：创建一个函数，当精确匹配失败时，尝试模糊匹配
2. **修改plan方法**：在精确匹配失败后，使用模糊匹配查找最相似的visibleText
3. **提高鲁棒性**：处理各种文本变体和输入差异

## 具体修改步骤

1. **在Planner.kt中添加模糊匹配函数**：
   - 计算文本相似度
   - 查找最相似的visibleText

2. **修改plan方法**：
   - 当`uiMap.visible_text_index[userGoal.targetVisibleText]`返回null时，尝试模糊匹配
   - 如果找到相似的visibleText，使用它继续规划
   - 否则返回NO_TARGET_ACTION

3. **测试验证**：
   - 运行测试确保修改后系统正常工作
   - 验证"查看待办任务"能够正确规划

## 技术优势

1. **提高鲁棒性**：能够处理用户输入的各种变体
2. **增强适应性**：减少对地图中键命名的严格依赖
3. **改善用户体验**：即使输入不完全匹配，也能正确规划路径

## 预期结果

修改后，Planner应该能够正确处理"查看待办任务"等意图，不再因为文本不完全匹配而返回NO_TARGET_ACTION错误。